<div class="savings-editor-dialog">
    <mat-toolbar color="accent" class="dialog-title">
        <div class="title-content">
            <mat-icon>pie_chart</mat-icon>
            <span>Distribuir ahorros</span>
        </div>
    </mat-toolbar>

    <mat-dialog-content class="dialog-content">
        <!-- Vista de edición -->
        <div *ngIf="isEditing" class="editing-view">
            <p class="description">Ingrese el monto total de ahorros para calcular su distribución:</p>

            <div class="input-group">
                <mat-form-field class="amount-input" appearance="outline">
                <mat-label>Monto total (ARS)</mat-label>
                <input matInput type="text" [formControl]="inputControl" (input)="handleInputChange($event)"
                    placeholder="0.00">
                </mat-form-field>
            </div>
        </div>

        <!-- Vista de distribución -->
        <div *ngIf="!isEditing" class="distribution-view">
            <h2 class="distribution-title">
                <span>Total a distribuir:</span>
                <span class="value">{{ customSavings | currencyFormat:selectedCurrency }}</span>
            </h2>

            <div class="distribution-list">
                <div class="distribution-item crypto">
                    <div class="item-info">
                        <mat-icon class="item-icon">currency_bitcoin</mat-icon>
                        <span class="label">CRIPTOMONEDAS</span>
                        <span class="percentage">(40%)</span>
                    </div>
                    <span class="value crypto-value">
                        {{ (customSavings * 0.4) | currencyFormat:selectedCurrency }}
                    </span>
                    <div class="crypto-distribution">
                        <div class="sub-item">
                            <span class="label">BTC</span>
                            <span class="value">{{ (customSavings * 0.4 * 0.35) | currencyFormat:selectedCurrency
                                }}</span>
                            <span class="percentage">(35%)</span>
                        </div>
                        <div class="sub-item">
                            <span class="label">ETH</span>
                            <span class="value">{{ (customSavings * 0.4 * 0.25) | currencyFormat:selectedCurrency
                                }}</span>
                            <span class="percentage">(25%)</span>
                        </div>
                        <div class="sub-item">
                            <span class="label">XRP</span>
                            <span class="value">{{ (customSavings * 0.4 * 0.20) | currencyFormat:selectedCurrency
                                }}</span>
                            <span class="percentage">(20%)</span>
                        </div>
                        <div class="sub-item">
                            <span class="label">SOL</span>
                            <span class="value">{{ (customSavings * 0.4 * 0.20) | currencyFormat:selectedCurrency
                                }}</span>
                            <span class="percentage">(20%)</span>
                        </div>
                    </div>
                </div>

                <div class="distribution-item stocks">
                    <div class="item-info">
                        <mat-icon class="item-icon">trending_up</mat-icon>
                        <span class="label">ACCIONES</span>
                        <span class="percentage">(40%)</span>
                    </div>
                    <span class="value stocks-value">
                        {{ (customSavings * 0.4) | currencyFormat:selectedCurrency }}
                    </span>
                </div>

                <div class="distribution-item dollar">
                    <div class="item-info">
                        <mat-icon class="item-icon">attach_money</mat-icon>
                        <span class="label">DÓLAR BANCO</span>
                        <span class="percentage">(20%)</span>
                    </div>
                    <span class="value dollar-value">
                        {{ (customSavings * 0.2) | currencyFormat:selectedCurrency }}
                    </span>
                </div>
            </div>
        </div>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
        @if (isEditing) {
        <button *ngIf="hasChanges()" mat-button (click)="handleReset()">
            Restablecer
        </button>
        <button mat-raised-button color="primary" (click)="handleSave()" [disabled]="getNumericValue() <= 0">
            Continuar
        </button>
        } @else {
        <button mat-button (click)="handleBack()">
            Editar total
        </button>
        }
    </mat-dialog-actions>
</div>