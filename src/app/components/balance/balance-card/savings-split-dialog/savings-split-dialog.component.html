<div class="savings-editor-dialog">
    <h2 mat-dialog-title class="dialog-title">
        <mat-icon class="title-icon">pie_chart</mat-icon>
        Distribuir ahorros
    </h2>

    <mat-dialog-content class="dialog-content">
        <!-- Vista de edición -->
        <div *ngIf="isEditing" class="editing-view">
            <p class="description">Ingrese el monto total de ahorros para calcular su distribución:</p>

            <!-- Input mejorado con selector de moneda -->
            <div class="input-with-label extra-compact">
                <span class="input-label">Monto total:</span>
                <div class="input-group extra-compact keep-horizontal">
                    <mat-form-field class="financial-input currency extra-compact" appearance="outline">
                        <input matInput type="text" [formControl]="inputControl" (input)="handleInputChange($event)"
                            placeholder="0.00">
                        <!-- Mostrar valor formateado como hint -->
                        <mat-hint *ngIf="getNumericValue() > 0" class="formatted-hint">
                            {{ getNumericValue() | currencyFormat:selectedCurrency }}
                        </mat-hint>
                    </mat-form-field>

                    <!-- Selector de moneda -->
                    <div class="currency-selector">
                        <button class="currency-toggle" [class.active]="selectedCurrency === 'ARS'"
                            (click)="setCurrency('ARS')">
                            ARS
                        </button>
                        <button class="currency-toggle" [class.active]="selectedCurrency === 'USD'"
                            (click)="setCurrency('USD')">
                            USD
                        </button>
                    </div>
                </div>
            </div>

            <div class="button-container">
                <button mat-raised-button color="primary" (click)="handleSave()" class="continue-btn"
                    [disabled]="getNumericValue() <= 0">
                    Continuar
                </button>

                <button *ngIf="hasChanges()" mat-button (click)="handleReset()" class="reset-btn">
                    Restablecer
                </button>
            </div>
        </div>

        <!-- Vista de distribución -->
        <div *ngIf="!isEditing" class="distribution-view">
            <div class="distribution-summary">
                <div class="total-amount">
                    <span class="total-label">Total a distribuir:</span>
                    <span class="total-value">{{ customSavings | currencyFormat:selectedCurrency }}</span>
                </div>
            </div>

            <div class="distribution-list">
                <div class="distribution-item crypto">
                    <div class="item-info">
                        <mat-icon class="item-icon">currency_bitcoin</mat-icon>
                        <span class="label">CRIPTOMONEDAS</span>
                        <span class="percentage">(40%)</span>
                    </div>
                    <span class="value crypto-value">
                        {{ (customSavings * 0.4) | currencyFormat:selectedCurrency }}
                    </span>
                </div>

                <div class="distribution-item stocks">
                    <div class="item-info">
                        <mat-icon class="item-icon">trending_up</mat-icon>
                        <span class="label">ACCIONES</span>
                        <span class="percentage">(40%)</span>
                    </div>
                    <span class="value stocks-value">
                        {{ (customSavings * 0.4) | currencyFormat:selectedCurrency }}
                    </span>
                </div>

                <div class="distribution-item dollar">
                    <div class="item-info">
                        <mat-icon class="item-icon">attach_money</mat-icon>
                        <span class="label">DÓLAR BANCO</span>
                        <span class="percentage">(20%)</span>
                    </div>
                    <span class="value dollar-value">
                        {{ (customSavings * 0.2) | currencyFormat:selectedCurrency }}
                    </span>
                </div>
            </div>

            <div class="edit-button-container">
                <button mat-button (click)="handleBack()" class="edit-btn">
                    <mat-icon>edit</mat-icon>
                    Editar valor
                </button>
            </div>
        </div>
    </mat-dialog-content>
</div>