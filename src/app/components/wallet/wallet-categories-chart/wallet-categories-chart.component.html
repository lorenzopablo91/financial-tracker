<div class="chart-container">
  <!-- Gráfico Doughnut centrado -->
  @if (hasData()) {
  <div class="chart-wrapper">
    <canvas #chartCanvas></canvas>
  </div>

  <!-- Leyenda personalizada horizontal -->
  <div class="custom-legend">
    @for (category of categoriesSignal(); track category.name; let i = $index) {
    <div class="legend-item">
      <div class="legend-indicator" [style.background-color]="category.color">
      </div>
      <div class="category-container">
        <span class="category-name">{{ category.name }}</span>
        <div class="category-amount" [class.hidden-amount]="hideAmountsSignal()">
          @if (hideAmountsSignal()) {
          ••••••
          } @else {
          {{ category.amount | currencyFormat:'USD' }}
          }
        </div>
      </div>
    </div>
    }
  </div>
  }

  <!-- Sin datos -->
  @if (!hasData()) {
  <div class="no-data">
    <mat-icon>pie_chart</mat-icon>
    <p>No hay datos de categorías disponibles</p>
  </div>
  }
</div>